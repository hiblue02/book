## 통계정보
### 인덱스 통계정보
- mysql 5.6 버전 부터는 테이블의 통계 정보를 innodb_table_stats 테이블로 관리할 수 있게 개선됬다. 
- ~~~SQL
  SELECT *
  FROM INNODB_INDEX_STATS
  WHERE DATABASE_NAME = 'employees'
  AND TABLE_NAME = 'employees'; 
  ~~~
- 통계정보를 자동으로 수집할지 여부도 테이블을 생성할 때 `STATS_AUTO_RECALC` 옵션을 이용해 테이블 단위로 조정할 수 있다.
- 영구적인 통계정보를 사용할 때, 더 정확한 통계정보를 수집하고자 한다면 `INNODB_STATS_PERSISTENT_SAMPLE_PAGES` 시스템 변수에 높은 값을 설정하면 된다.

### 히스토그램
- 히스토그램 정보는 칼럼 단위로 관리되는데, 이는 자동으로 수집되지 않고 `ANALYZE TABLE ... UPDATE HISTOGRAM` 명령을 실행해 수동으로 수집 및 관리된다.
- 히스토그램은 특정 칼럼이 가지는 모든 값에 대한 분포도 정보를 가지지는 않지만 각 범위(버킷)별로 레코드의 건수와 유니크한 값의 개수 정보를 가지기 때문에 훨씬 정확한 예측을 할 수 있다. 
- ~~~SQL
  ANALYZE TABLE EMPLOYEES.EMPLOYEES
  UPDATE HISTOGRAM ON GENDER, HIRE_DATE;

  SELECT *
  FROM COLUMN_STATISTICS
  WHERE SCHEMA_NAME='EMPLOYEES'
  AND TABLE_NAME='EMPLOYEES'
  ~~~
- MYSQL8.0에서는 2종류의 히스토그램을 지원한다.
    - singleton
        - 칼럼값 개별로 레코드 건수를 관리 (value-based, 도수 분포)
        - 각 버킷이 칼럼의 값과 발생빈도의 비율을 갖는다. 
    - equi-height
        - 칼럼값의 범위를 균등한 개수로 구분해서 관리. (height-balanced)
        - 각 버킷이 범위 시작 값과 마지막 값, 그리고 발생 빈도율과 각 버킷에 포함된 유니크한 값의 개수 등 4개의 값을 가진다. 
