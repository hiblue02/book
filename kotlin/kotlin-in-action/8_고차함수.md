### 고차 함수 정의 
- 고차 함수는 다른 함수를 인자로 받거나 함수를 반환하는 함수다.
#### 함수 타입 
- val sum: (Int, Int) -> Int = {x,y -> x + y}
- 함수 타입을 정의하려면, 함수 파라미터의 타입을 괄호 안에 넣고, 그 뒤에 화살표를 추가한 다음, 함수의 반환 타입을 지정하면 된다.
- ```kotlin
  fun performRequest(
    url: String,
    callback: (code: Int, content: String) -> Unit )
  { .. }
  ```
#### 인자로 받은 함수 호출
- 인자로 받은 함수를 호출하는 구문은 일반 함수를 호출하는 구문과 같다.
- ```kotlin
  fun twoAndTree(operation: (Int, Int) -> Int) {
    val result = operation(2,3)
  }
  ```
#### 자바에서 코틀린 함수 타입 사용
- 함수타입은 일반 인터페이스로 컴파일된다. 즉 FuntionN 인터페이스를 구현하는 객체를 저장한다.
- ```kotlin
  fun processTheAnswer(f:(Int) -> Int) {
      println(f(42))
  }
  ```
  ```java
  processTheAnswer(number -> number + 1)
  ```
#### 디폴드 값을 지정한 함수 타입 파라미터나 널이 될 수 있는 함수 타입 파라미터
- ```kotlin
  fun processTheAnswer(f:(Int) -> Int = {it + 1) { // default 람다식을 지정한다.
      println(f(42))
  }
  ```
- 널이 될 수 있는 함수 타입을 받으면, 그 함수를 직접 호출할 수 없다.
- ```kotlin
  fun <T> Collection<T>.joinToString(
      seperator: String = ",",
      prefix: String = "",
      postfix: String = "",
      transform((T) -> String) ? = null // null이 될 수 있는 함수 타입 파라미터를 선언한다.
  ): String {
      tranform?.invoke(element) ?: element.toString() // 안전 호출을 사용하고 엘비스 연산자를 사용해 람다를 인자로 받지 않은 경우를 처리한다.
  }
  ```
#### 함수를 함수에서 반환
- ```kotlin
  fun getShippingCostCalculator(
    order: Order
  ) : (Order) -> Double {
    return {order -> 1.2 * order.itemCount}
  }
  ```
### 인라인 함수: 람다의 부가 비용 없애기 
- 코틀린은 보통 람다를 무명 클래스로 컴파일한다. 람다가 변수를 포획하면 람다가 생성되는 시점에 무명 클래스 생성에 따른 부가 비용이 든다. 
- inline 변경자를 어떤 함수에 붙이면 컴파일러는 그 함수를 호출하는 모든 문장을 함수 본문에 해당하는 바이트 코드로 바꿔치기 해준다.
#### 인라이닝이 작동하는 방식 
- 함수의 본문뿐 아니라 syncronized에 저달된 람다의 본문도 함께 인라이닝 된다. 람다 본문에 의해 만들어지는 바이트코드는 그 람다를 호출하는 코드 정의의 일부분으로 간주되기 때문에 코틀린 컴파일러는 그 람다를 함수 인터페이스를 구현하는 무명 클래스로 감싸지 않는다.
- 
